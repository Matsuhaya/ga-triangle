<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <style>
    .canvas {
      border: 1px solid;
    }
  </style>
</head>

<body>
  <canvas id="canvas1" class="canvas"></canvas>
  <table border="1">
    <tbody>
      <tr>
        <td>辺aの長さ</td>
        <td id="length_a"></td>
      </tr>
      <tr>
        <td>辺bの長さ</td>
        <td id="length_b"></td>
      </tr>
      <tr>
        <td>辺cの長さ</td>
        <td id="length_c"></td>
      </tr>
      <tr>
        <td>3辺の合計長さ</td>
        <td id="sum_sides"></td>
      </tr>
      <tr>
        <td>面積</td>
        <td id="area"></td>
      </tr>
    </tbody>
</body>

<script>
  const WIDTH = "500";
  const HEIGHT = "500";
  var canvas = document.getElementById("canvas1");
  canvas.width = WIDTH;
  canvas.height = HEIGHT;

  class Triangle {
    /**
     * a,b,cという三つの頂点をもつ三角形
     * @param {object} vertexes
     **/
    constructor(vertexes) {
      this.vertexes = {
        A: {
          x1: vertexes[0][0],
          y1: vertexes[0][1]
        },
        B: {
          x2: vertexes[1][0],
          y2: vertexes[1][1]
        },
        C: {
          x3: vertexes[2][0],
          y3: vertexes[2][1]
        }
      };
      this.length = {};
    }

    // ３辺の長さを計算する
    calcLength() {
      this.length.a = Math.sqrt(
        Math.pow((this.vertexes.B.x2 - this.vertexes.C.x3), 2) +
        Math.pow((this.vertexes.B.y2 - this.vertexes.C.y3), 2)
      );
      this.length.b = Math.sqrt(
        Math.pow((this.vertexes.C.x3 - this.vertexes.A.x1), 2) +
        Math.pow((this.vertexes.C.y3 - this.vertexes.A.y1), 2)
      );
      this.length.c = Math.sqrt(
        Math.pow((this.vertexes.A.x1 - this.vertexes.B.x2), 2) +
        Math.pow((this.vertexes.A.y1 - this.vertexes.B.y2), 2)
      );
    }

    // 三つの頂点を直線で繋いだ三角形をcanvasに描画する
    drawTriangle() {
      if (canvas.getContext) {
        var ctx = canvas.getContext("2d");

        ctx.beginPath();
        ctx.moveTo(this.vertexes.A.x1, this.vertexes.A.y1); //最初の点の場所
        ctx.lineTo(this.vertexes.B.x2, this.vertexes.B.y2); //2番目の点の場所
        ctx.lineTo(this.vertexes.C.x3, this.vertexes.C.y3); //3番目の点の場所
        ctx.closePath();	//三角形の最後の線 closeさせる

        ctx.strokeStyle = "rgb(0,0,0)"; //枠線の色
        ctx.stroke();

        ctx.fillStyle = "rgba(0,0,255,0.1)";//塗りつぶしの色
        ctx.fill();
      }
    }

    // ３辺の長さの合計を返す
    // 下記URLの図を参照
    // https://math-jp.net/2018/08/26/yogenteiri-kakudo/
    calcSumSides() {
      return this.length.a + this.length.b + this.length.c;
    }

    // 面積を返す
    // (x1,y1),(x2,y2),(x3,y3)の３つを頂点とする三角形の公式は下記の通り
    // https://mathwords.net/x1y2hikux2y1
    // |(x1 - x3)(y2 - y3) - (x2 - x3)(y1 - y3)|/2
    calcArea() {
      let x1 = this.vertexes.A.x1;
      let x2 = this.vertexes.B.x2;
      let x3 = this.vertexes.C.x3;
      let y1 = this.vertexes.A.y1;
      let y2 = this.vertexes.B.y2;
      let y3 = this.vertexes.C.y3;

      return Math.abs((x1 - x3) * (y2 - y3) - (x2 - x3) * (y1 - y3)) / 2
    }

    /**
     * 三角形の頂点を返す静的メソッド
     * @return {array} vertex [x,y]
     **/
    static makeVertex() {
      let vertex = [];
      vertex.push(Math.random() * WIDTH);
      vertex.push(Math.random() * HEIGHT);
      return vertex;
    }
  }

  let makeTriangle = () => {
    let vertexes = [];
    for (let i = 0; i < 3; i++) {
      vertexes.push(Triangle.makeVertex())
    }

    // テスト用
    // let test = [
    //   [100, 100],
    //   [100, 200],
    //   [200, 200]
    // ]
    // return new Triangle(test);

    return new Triangle(vertexes);
  }

  // 三角形のインスタンスを生成する
  let triangle = makeTriangle();
  triangle.calcLength();
  // canvasに三角形を描画する
  triangle.drawTriangle();

  // 計算結果を出力する
  $('#length_a').text(triangle.length.a);
  $('#length_b').text(triangle.length.b);
  $('#length_c').text(triangle.length.c);
  $('#sum_sides').text(triangle.calcSumSides());
  $('#area').text(triangle.calcArea());

</script>

</html>