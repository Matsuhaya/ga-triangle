<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <style>
    .canvas {
      border: 1px solid;
    }
  </style>
</head>

<body>
  <canvas id="canvas1" class="canvas"></canvas>
  <table border="1">
    <tbody>
      <tr>
        <td>3辺の合計長さ</td>
        <td id="sum_sides"></td>
      </tr>
      <tr>
        <td>面積</td>
        <td id="area"></td>
      </tr>
    </tbody>
</body>

<script>
  const WIDTH = "500";
  const HEIGHT = "500";
  var canvas = document.getElementById("canvas1");
  canvas.width = WIDTH;
  canvas.height = HEIGHT;

  class Triangle {
    /**
     * a,b,cという三つの頂点をもつ三角形
     * @param {object} vertexes
     **/
    constructor(vertexes) {
      this.vertexes = {
        a: {
          x: vertexes[0][0],
          y: vertexes[0][1]
        },
        b: {
          x: vertexes[1][0],
          y: vertexes[1][1]
        },
        c: {
          x: vertexes[2][0],
          y: vertexes[2][1]
        }
      }
    }

    // 三つの頂点を直線で繋いだ三角形をcanvasに描画する
    drawTriangle() {
      if (canvas.getContext) {
        var ctx = canvas.getContext("2d");

        ctx.beginPath();
        ctx.moveTo(this.vertexes.a.x, this.vertexes.a.y); //最初の点の場所
        ctx.lineTo(this.vertexes.b.x, this.vertexes.b.y); //2番目の点の場所
        ctx.lineTo(this.vertexes.c.x, this.vertexes.c.y); //3番目の点の場所
        ctx.closePath();	//三角形の最後の線 closeさせる

        ctx.strokeStyle = "rgb(0,0,0)"; //枠線の色
        ctx.stroke();

        ctx.fillStyle = "rgba(0,0,255,0.1)";//塗りつぶしの色
        ctx.fill();
      }
    }

    // 三辺の長さの合計を返す
    calcSumSides() {
      let abx = this.vertexes.a.x - this.vertexes.b.x;
      let aby = this.vertexes.a.y - this.vertexes.b.y;
      let bcx = this.vertexes.b.x - this.vertexes.c.x;
      let bcy = this.vertexes.b.y - this.vertexes.c.y;
      let cax = this.vertexes.c.x - this.vertexes.a.x;
      let cay = this.vertexes.c.y - this.vertexes.a.y;

      return Math.sqrt(Math.pow(abx, 2) + Math.pow(aby, 2)) +
        Math.sqrt(Math.pow(bcx, 2) + Math.pow(bcy, 2)) +
        Math.sqrt(Math.pow(cax, 2) + Math.pow(cay, 2));
    }

    // 面積を返す
    // (x1,y1),(x2,y2),(x3,y3)の３つを頂点とする三角形の公式は下記の通り
    // https://mathwords.net/x1y2hikux2y1
    // |(x1 - x3)(y2 - y3) - (x2 - x3)(y1 - y3)|/2
    calcArea() {
      let x1 = this.vertexes.a.x;
      let x2 = this.vertexes.b.x;
      let x3 = this.vertexes.c.x;
      let y1 = this.vertexes.a.y;
      let y2 = this.vertexes.b.y;
      let y3 = this.vertexes.c.y;

      return Math.abs((x1 - x3) * (y2 - y3) - (x2 - x3) * (y1 - y3)) / 2
    }

    /**
     * 三角形の頂点を返す静的メソッド
     * @return {array} vertex [x,y]
     **/
    static makeVertex() {
      let vertex = [];
      vertex.push(Math.random() * WIDTH);
      vertex.push(Math.random() * HEIGHT);
      return vertex;
    }
  }

  let makeTriangle = () => {
    let vertexes = [];
    for (let i = 0; i < 3; i++) {
      vertexes.push(Triangle.makeVertex())
    }

    // テスト用
    let test = [
      [100, 100],
      [100, 200],
      [200, 200]
    ]
    return new Triangle(test);

    // return new Triangle(vertexes);
  }

  // 三角形のインスタンスを生成する
  let triangle = makeTriangle();
  // canvasに三角形を描画する
  triangle.drawTriangle();
  // 3辺の合計長さを出力する
  $('#sum_sides').text(triangle.calcSumSides());
  $('#area').text(triangle.calcArea());

</script>

</html>